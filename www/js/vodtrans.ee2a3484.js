webpackJsonp([17],{"+i/Z":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:["modal",{fade:t.fade}],attrs:{"data-keyboard":"true","data-backdrop":"static",tabindex:"-1"}},[a("div",{staticClass:"modal-dialog modal-lg"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[t._m(0),t._v(" "),a("h4",{staticClass:"modal-title text-success text-center"},[a("span",[t._v(t._s(t.videoTitle))])])]),t._v(" "),a("div",{staticClass:"modal-body"},[t.bShow?a("LivePlayer",{directives:[{name:"loading",rawName:"v-loading",value:t.bLoading,expression:"bLoading"}],attrs:{muted:t.muted,"element-loading-background":""==t.snapUrl?"#000":"rgba(0,0,0,0.8)","element-loading-text":t.$t("m.c_loading"),resolution:t.resolution,resolutiondefault:t.resolutiondefault,videoUrl:t.videoUrl,poster:t.snapUrl,live:t.live,loading:t.bLoading},on:{message:t.$message,"update:loading":function(e){t.bLoading=e},pause:t.onPause,timeupdate:t.timeUpdate,play:t.onPlay,ended:function(e){t.bEnd=!0}}}):t._e()],1),t._v(" "),a("div",{staticClass:"modal-footer"},[a("button",{directives:[{name:"show",rawName:"v-show",value:t.isSetCover&&t.bPause&&!t.bEnd,expression:"isSetCover && bPause && !bEnd "}],staticClass:"btn btn-success",attrs:{type:"button",disabled:t.bCapturing},on:{click:function(e){return e.preventDefault(),t.capture(e)}}},[t._v(t._s(t.$t("m.vod_set_cover")))]),t._v(" "),a("button",{staticClass:"btn btn-default",attrs:{type:"button","data-dismiss":"modal"}},[t._v(t._s(t.$t("m.c_close")))])])])])])},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])}],o={render:s,staticRenderFns:i};e.a=o},NBeC:function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var s=a("UahQ"),i=function(t){return t&&t.__esModule?t:{default:t}}(s);e.default={data:function(){return{bCommitting:!1,activeTab:"vodconcat",vods:[],vodname:"",checkvods:[],isMerge:!1}},mounted:function(){this.queryVods("")},components:{VODVideoDlg:i.default},methods:{multiSelect:function(){},queryVods:function(e){var a=this;t.post("api/v1/vod/list",{start:0,limit:40,sort:"name",order:"asc",q:e}).then(function(t){var e=t.data;a.vods=e.rows})},handleClick:function(e,a){t("#tab-"+e.$options.propsData.name).blur()},isNoMerge:function(){return this.isMerge},play:function(t){console.log(t),this.$refs.videoDlg.playWithRow(t)},merge:function(){for(var e=[],a=0;a<this.checkvods.length;a++)e.push(this.checkvods[a].id);t.post("api/v1/vod/merge",{ids:e.join(",")}).then(function(t){})}},computed:{}}}).call(e,a("0iPh"))},NXWW:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"qcontent-header"},[t._v("视频处理")]),t._v(" "),a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"box no-border"},[a("div",{staticClass:"box-body"},[a("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},[a("el-tab-pane",{attrs:{label:"点播视频合并",name:"vodconcat"}},[a("form",{staticClass:"form-horizontal",attrs:{role:"form"}},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"col-sm-2 control-label"},[a("span",{staticClass:"text-red"},[t._v("*")]),t._v("合并后视频名称")]),t._v(" "),a("div",{staticClass:"col-sm-9"},[a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model.trim",value:t.vodname,expression:"vodname",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",name:"vodname","data-vv-as":"视频名称"},domProps:{value:t.vodname},on:{input:function(e){e.target.composing||(t.vodname=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),t._v(" "),a("span",{staticClass:"help-block"},[t._v(t._s(t.errors.first("vodname")))])])]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{staticClass:"col-sm-2 control-label",attrs:{for:"input-src"}},[a("span",{staticClass:"text-red"},[t._v("*")]),t._v("合并点播视频文件选择")]),t._v(" "),a("div",{staticClass:"col-sm-9"},[a("el-select",{staticStyle:{width:"100%"},attrs:{title:"可以输入模糊匹配","value-key":"id","automatic-dropdown":"",multiple:"",filterable:"",remote:"","remote-method":t.queryVods,placeholder:"请选择点播文件(可模糊查询)"},on:{change:t.multiSelect},model:{value:t.checkvods,callback:function(e){t.checkvods=e},expression:"checkvods"}},t._l(t.vods,function(e){return a("el-option",{key:e.id,attrs:{label:e.name+" "+e.aspect,value:e}},[a("span",{staticStyle:{float:"left"}},[t._v(t._s(e.name)+" "+t._s(e.aspect))]),t._v(" "),a("span",{staticStyle:{float:"right","margin-left":"10px","margin-right":"15px",color:"#8492a6","font-size":"13px"}},[t._v(t._s(e.id)+" ")])])}),1)],1)]),t._v(" "),t.checkvods.length>0?a("div",{staticClass:"form-group"},[a("label",{staticClass:"col-sm-2 control-label",attrs:{for:"input-src"}},[t._v("待合并的视频")]),t._v(" "),a("div",{staticClass:"col-sm-9",staticStyle:{height:"300px","max-width":"400px","overflow-y":"scroll"}},t._l(t.checkvods,function(e){return a("el-image",{key:e.snapUrl,attrs:{src:e.snapUrl,lazy:"",alt:"视频"+e.name,title:"点击播放"+e.name},on:{click:function(a){return a.preventDefault(),t.play(e)}}})}),1)]):t._e()]),t._v(" "),a("div",{staticClass:"box-footer clearfix text-center"},[a("button",{staticClass:"btn btn-success",attrs:{type:"button",disabled:t.isNoMerge()},on:{click:function(e){return e.preventDefault(),t.merge(e)}}},[a("i",{staticClass:"fa fa-save"}),t._v("  开始合并")])])])],1)],1)])]),t._v(" "),a("VODVideoDlg",{ref:"videoDlg",attrs:{fade:""}})],1)},i=[],o={render:s,staticRenderFns:i};e.a=o},UahQ:function(t,e,a){"use strict";function s(t){a("VNmM")}Object.defineProperty(e,"__esModule",{value:!0});var i=a("ZGQx"),o=a.n(i);for(var n in i)["default","default"].indexOf(n)<0&&function(t){a.d(e,t,function(){return i[t]})}(n);var l=a("+i/Z"),r=a("VU/8"),d=s,c=r(o.a,l.a,!1,d,"data-v-c1d27a8e",null);e.default=c.exports},VNmM:function(t,e,a){var s=a("Yr0M");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);a("rjj0")("0bf9b9ca",s,!0,{})},Yr0M:function(t,e,a){e=t.exports=a("FZ+f")(!1),e.push([t.i,".modal-title[data-v-c1d27a8e]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}",""])},ZGQx:function(t,e,a){"use strict";(function(t){function s(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),a("F8S1");var i=a("xXnQ"),o=s(i),n=a("PJh5"),l=s(n);e.default={data:function(){return{id:"",videoUrl:"",videoTitle:"",snapUrl:"",bShow:!1,bLoading:!1,bCapturing:!1,bPause:!1,bEnd:!1,time:0,isSetCover:!0,isresolution:!1,resolution:"",resolutiondefault:"",muted:!1}},props:{live:{type:Boolean,default:!1},fade:{type:Boolean,default:!1}},mounted:function(){var e=this;t(this.$el).find(".modal-content").draggable({handle:".modal-header",cancel:".modal-title span",addClasses:!1,containment:"document",delay:100,opacity:.5}),t(this.$el).on("hide.bs.modal",function(){e.bShow=!1}).on("show.bs.modal",function(){e.bShow=!0})},components:{LivePlayer:o.default},methods:{play:function(e,a){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];this.id=e,this.videoUrl=a,this.videoTitle=s,this.snapUrl=i,this.isSetCover=o,t(this.$el).modal("show")},playWithRow:function(e){var a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.id=e.id,this.videoUrl=e.videoUrl,this.videoTitle=e.name,this.snapUrl=e.snapUrl,this.isSetCover=a,this.isresolution=e.isresolution,this.resolution=e.resolution,this.resolutiondefault=e.resolutiondefault,t(this.$el).modal("show")},capture:function(){var e=this;this.bCapturing=!0;var a=(0,l.default)().startOf("day");a.add("ms",1e3*this.time);var s=a.format("HH:mm:ss.SS");t.post("api/v1/vod/snap",{id:this.id,time:s}).then(function(t){t.data;e.$message({type:"success",message:e.$t("m.vod_set_cover_msg")}),e.$emit("update:snap",e.id)}).always(function(){e.bCapturing=!1})},timeUpdate:function(t){this.time=t,this.bEnd=!1},onPlay:function(){this.pauseTimer&&(clearTimeout(this.pauseTimer),this.pauseTimer=0),this.bPause=!1},onPause:function(){var t=this;this.pauseTimer=setTimeout(function(){t.bPause=!0},500)}}}}).call(e,a("0iPh"))},wFBc:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("NBeC"),i=a.n(s);for(var o in s)["default","default"].indexOf(o)<0&&function(t){a.d(e,t,function(){return s[t]})}(o);var n=a("NXWW"),l=a("VU/8"),r=l(i.a,n.a,!1,null,null,null);e.default=r.exports}});